{% extends "base_generic.html" %}

{% block content %}

    <h1> Upload model </h1>

    <div class="container">
        <form id="uploadModelForm" action="/api/upload-model/" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
                <label for="modelName">Model Name:</label>
                <input type="text" id="modelName" name="model_name" required>
            </div>
            <div class="form-group">
                <label for="modelNotes">Notes:</label>
                <textarea id="modelNotes" name="notes" rows="3" maxlength="255"></textarea>
            </div>
            {% if preprocessing_steps %}
            <div class="form-group">
                <label for="preprocessingSteps">Select preprocessing steps: </label>
                <select name="preprocessingSteps[]" id="preprocessingSteps" multiple> 
                    {% for row in preprocessing_steps %}
                        <option value="{{ row.id }}">{{row.name}}</option>
                    {% endfor %}
                </select>
            </div>
            {% endif %}
            <div class="form-group">
                <label for="modelFile">Model File (.pkl):</label>
                <input type="file" id="modelFile" name="model_file" accept=".pkl" required>
            </div>
            {% if upload_success %}
                <div id="successMessage" class="success-message" style="display: block;">{{message}}</div>
            {% elif error %}
                <div id="errorMessage" class="error-message" style="display: block;">{{message}}</div>
            {% endif %}
            <button type="submit">Upload Model</button>
        </form>
    </div>
{% endblock %}
